"use strict";(self.webpackChunkczertainly=self.webpackChunkczertainly||[]).push([[8711],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=l(n),f=i,m=p["".concat(u,".").concat(f)]||p[f]||d[f]||o;return n?r.createElement(m,a(a({ref:t},c),{},{components:n})):r.createElement(m,a({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=f;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[p]="string"==typeof e?e:i,a[1]=s;for(var l=2;l<o;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},79123:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return p}});var r=n(83117),i=n(80102),o=(n(67294),n(3905)),a=["components"],s={},u="Configuration",l={unversionedId:"signing/saml-authorizer/configuration",id:"signing/saml-authorizer/configuration",title:"Configuration",description:"To enable SAML Authorizer for the worker, use the following class:",source:"@site/docs/30-signing/15-saml-authorizer/03-configuration.md",sourceDirName:"30-signing/15-saml-authorizer",slug:"/signing/saml-authorizer/configuration",permalink:"/docs/signing/saml-authorizer/configuration",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/docs/signing/saml-authorizer/overview"},next:{title:"SAML Response Example",permalink:"/docs/signing/saml-authorizer/response-example"}},c={},p=[],d={toc:p},f="wrapper";function m(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)(f,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"To enable SAML Authorizer for the worker, use the following class:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"AUTHTYPE=com.czertainly.signserver.module.eidas.samlauth.SAMLAuthorizer\n")),(0,o.kt)("p",null,"Several trusted SAML authorities can be set up using indexed worker properties starting with a ",(0,o.kt)("inlineCode",{parentName:"p"},"SAMLSERVER")," prefix.\nCurrently, the algorithm types ",(0,o.kt)("inlineCode",{parentName:"p"},"RSA")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"ECDSA")," are supported and public keys use ",(0,o.kt)("inlineCode",{parentName:"p"},"RSA")," by default. To use ",(0,o.kt)("inlineCode",{parentName:"p"},"ECDSA"),", set the key algorithm to ",(0,o.kt)("inlineCode",{parentName:"p"},"ECDSA")," (",(0,o.kt)("inlineCode",{parentName:"p"},"SAMLERVERn.KEYALG=ECDSA"),"). It is also allowed to explicitly set the key algorithm to ",(0,o.kt)("inlineCode",{parentName:"p"},"RSA"),", but not needed as this is the default.\nThe issuer field needs to be matched to the value provided as the Issuer element (",(0,o.kt)("inlineCode",{parentName:"p"},"<Issuer>"),") in the SAML Response, according to the following example. For more information on the Issuer element, refer to ",(0,o.kt)("a",{parentName:"p",href:"http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf"},"Assertions and Protocols for the OASIS Security Assertion Markup Language (SAML) V2.0"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"SAMLSERVER1.ISSUER=<Issuer>\nSAMLSERVER1.CERT=<base 64-encoded certificate of the issuer>\nSAMLSERVER1.KEYALG=RSA\nSAMLSERVERn.ISSUER=<Issuer>\nSAMLSERVERn.CERT=<base 64-encoded certificate of the issuer>\nSAMLSERVERn.KEYALG=ECDSA\n")),(0,o.kt)("p",null,"Each issuer needs a matching rule for matching on the assertion\u2019s attributes in the SAML Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"SAMLATTS1.ISSUER=<Issuer>\nSAMLATTS1.ATT.NAME=groups\nSAMLATTS1.ATT.VALUE=users\n")),(0,o.kt)("p",null,"This allows access to the request which provides a signed SAML Response with a valid (and not expired) signature that:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"It can be verified by the public key configured with the certificate and that issuer name/URI."),(0,o.kt)("li",{parentName:"ul"},"It contains an assertion\u2019s attributes named ",(0,o.kt)("inlineCode",{parentName:"li"},"groups"),", that either has the value ",(0,o.kt)("inlineCode",{parentName:"li"},"users")," or contains a list of values including that value.")),(0,o.kt)("p",null,"It is also possible to configure a list of accepted audiences that are checked against the intended audiences from the AudienceRestriction element of the SAML Response (if present). If the SAML Response has an audience, it must match a configured audience. If the audiences do not match, the request is not authorized."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"ACCEPTED_AUDIENCES=<comma-separated list of audience names>")))}m.isMDXComponent=!0}}]);