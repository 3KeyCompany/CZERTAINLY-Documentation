"use strict";(self.webpackChunkczertainly=self.webpackChunkczertainly||[]).push([[4400],{3905:function(t,e,n){n.d(e,{Zo:function(){return g},kt:function(){return c}});var a=n(67294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var o=a.createContext({}),d=function(t){var e=a.useContext(o),n=e;return t&&(n="function"==typeof t?t(e):s(s({},e),t)),n},g=function(t){var e=d(t.components);return a.createElement(o.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},p=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,r=t.originalType,o=t.parentName,g=l(t,["components","mdxType","originalType","parentName"]),p=d(n),c=i,h=p["".concat(o,".").concat(c)]||p[c]||u[c]||r;return n?a.createElement(h,s(s({ref:e},g),{},{components:n})):a.createElement(h,s({ref:e},g))}));function c(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var r=n.length,s=new Array(r);s[0]=p;var l={};for(var o in e)hasOwnProperty.call(e,o)&&(l[o]=e[o]);l.originalType=t,l.mdxType="string"==typeof t?t:i,s[1]=l;for(var d=2;d<r;d++)s[d]=n[d];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},26281:function(t,e,n){n.r(e),n.d(e,{GenMetaTable:function(){return k},GenTable:function(){return h},assets:function(){return u},contentTitle:function(){return d},data:function(){return c},default:function(){return b},frontMatter:function(){return o},metadata:function(){return g},requestdata:function(){return m},toc:function(){return p}});var a=n(83117),i=n(80102),r=n(67294),s=n(3905),l=["components"],o={},d="Batch Signing",g={unversionedId:"signing/ades-formats/batch-signing",id:"signing/ades-formats/batch-signing",title:"Batch Signing",description:"Batch signing allows to sign multiple data in one batch (one signing request). Multiple data can be specified in the signing request and multiple signed data will be provided in response.",source:"@site/docs/30-signing/05-ades-formats/31-batch-signing.mdx",sourceDirName:"30-signing/05-ades-formats",slug:"/signing/ades-formats/batch-signing",permalink:"/docs/signing/ades-formats/batch-signing",draft:!1,tags:[],version:"current",sidebarPosition:31,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Hash Signing",permalink:"/docs/signing/ades-formats/hash-signing"},next:{title:"Introduction",permalink:"/docs/signing/ades-validation/overview"}},u={},p=[{value:"Crypto Token support",id:"crypto-token-support",level:2},{value:"Activating batch signing",id:"activating-batch-signing",level:2},{value:"Request metadata properties",id:"request-metadata-properties",level:2},{value:"Batch signing request format",id:"batch-signing-request-format",level:2},{value:"Batch signing response format",id:"batch-signing-response-format",level:2},{value:"Hash signing support",id:"hash-signing-support",level:2}],c=[{property:"BATCHSIGNING",description:(0,s.kt)(r.Fragment,null,"Batch signing request is expected to be provided as input for the signing process."),default:(0,s.kt)(r.Fragment,null,(0,s.kt)("span",{class:"badge badge--secondary"},"false")),mandatory:(0,s.kt)(r.Fragment,null,(0,s.kt)("span",{class:"badge badge--danger"},"NO"))},{property:"ALLOW_BATCHSIGNING_OVERRIDE",description:(0,s.kt)(r.Fragment,null,"Allow client to specify in the ",(0,s.kt)("a",{href:"#request-metadata-properties"},"request metadata")," if the input data is in the form of batch request and batch signing is requested."),default:(0,s.kt)(r.Fragment,null,(0,s.kt)("span",{class:"badge badge--secondary"},"false")),mandatory:(0,s.kt)(r.Fragment,null,(0,s.kt)("span",{class:"badge badge--danger"},"NO"))},{property:"ACCEPTED_HASH_DIGEST_ALGORITHMS",description:(0,s.kt)(r.Fragment,null,"Comma-separated list of allowed digest algorithms for batch signing."),default:(0,s.kt)(r.Fragment,null,(0,s.kt)("span",{class:"badge badge--secondary"},"NONE")),mandatory:(0,s.kt)(r.Fragment,null,"Mandatory if:",(0,s.kt)("ul",null,(0,s.kt)("li",null,(0,s.kt)("b",null,"BATCH_SIGNING")),(0,s.kt)("li",null,(0,s.kt)("b",null,"ALLOW_BATCH_SIGNING_OVERRIDE"))))}],h=function(t){var e=t.data;return(0,s.kt)(r.Fragment,null,e.map((function(t,e){return(0,s.kt)("tr",{key:e},(0,s.kt)("td",null,(0,s.kt)("b",null,t.property)),(0,s.kt)("td",null,t.description),(0,s.kt)("td",null,t.default),(0,s.kt)("td",null,t.mandatory))})))},m=[{property:"USING_BATCHSIGNING",description:(0,s.kt)(r.Fragment,null,"Specifies if the request should be handled as batch signing or not."),mandatory:(0,s.kt)(r.Fragment,null,"Mandatory when ",(0,s.kt)("b",null,"ALLOW_BATCH_SIGNING_OVERRIDE=true"))}],k=function(t){var e=t.data;return(0,s.kt)(r.Fragment,null,e.map((function(t,e){return(0,s.kt)("tr",{key:e},(0,s.kt)("td",null,(0,s.kt)("b",null,t.property)),(0,s.kt)("td",null,t.description),(0,s.kt)("td",null,t.mandatory))})))},f={toc:p,data:c,GenTable:h,requestdata:m,GenMetaTable:k};function b(t){var e=t.components,n=(0,i.Z)(t,l);return(0,s.kt)("wrapper",(0,a.Z)({},f,n,{components:e,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"batch-signing"},"Batch Signing"),(0,s.kt)("p",null,"Batch signing allows to sign multiple data in one batch (one signing request). Multiple data can be specified in the signing request and multiple signed data will be provided in response."),(0,s.kt)("p",null,"It is useful when you do not want to sign and approve each data individually, but rather collect all data that should be signed and digitally sign them all with one request. It can save time and effort especially when the workflow cannot support, from whatever reason, simultaneous signing of single data."),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"Batch signing is supported for the signers that are part of the ",(0,s.kt)("a",{parentName:"p",href:"./overview"},"AdES Signature Formats"),". Other signer does not support batch signing.")),(0,s.kt)("h2",{id:"crypto-token-support"},"Crypto Token support"),(0,s.kt)("p",null,"Batch signing supports all implementations of the Crypto Token. When the Crypto Token implementation does not support batch signing, the signing process will sign each data individually, thus effectively simulating the batch signing transparently from the client."),(0,s.kt)("h2",{id:"activating-batch-signing"},"Activating batch signing"),(0,s.kt)("p",null,"To activate the batch signing, you need to configure the following properties:"),(0,s.kt)("table",null,(0,s.kt)("th",null,"Property"),(0,s.kt)("th",null,"Description"),(0,s.kt)("th",null,"Default Value"),(0,s.kt)("th",null,"Mandatory"),(0,s.kt)("tbody",null,(0,s.kt)(h,{data:c,mdxType:"GenTable"}))),(0,s.kt)("admonition",{type:"caution"},(0,s.kt)("p",{parentName:"admonition"},"When you configure both ",(0,s.kt)("inlineCode",{parentName:"p"},"BATCHSIGNING=true")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"ALLOW_BATCHSIGNING_OVERRIDE=true"),", the ",(0,s.kt)("inlineCode",{parentName:"p"},"BATCHSIGNING")," takes precedence and all requests will be considered as batch requests for batch signing. If you want to keep the decision on the client, use only ",(0,s.kt)("inlineCode",{parentName:"p"},"ALLOW_BATCHSIGNING_OVERRIDE=true"),".")),(0,s.kt)("h2",{id:"request-metadata-properties"},"Request metadata properties"),(0,s.kt)("p",null,"The following metadata should be provided by the client in the signing request when batch signing is activated:"),(0,s.kt)("table",null,(0,s.kt)("th",null,"Property"),(0,s.kt)("th",null,"Description"),(0,s.kt)("th",null,"Mandatory"),(0,s.kt)("tbody",null,(0,s.kt)(k,{data:m,mdxType:"GenMetaTable"}))),(0,s.kt)("admonition",{title:"Hash and Batch",type:"info"},(0,s.kt)("p",{parentName:"admonition"},"Hash signing and batch signing can be combined. See ",(0,s.kt)("a",{parentName:"p",href:"#hash-signing-support"},"Hash signing support")," for more information.")),(0,s.kt)("h2",{id:"batch-signing-request-format"},"Batch signing request format"),(0,s.kt)("p",null,"Request for batch signing requires to have ",(0,s.kt)("inlineCode",{parentName:"p"},"JSON")," formatted data in the body of the request.\nThe data structure contains array of signature requests with the following fields:"),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",align:null},"Field name"),(0,s.kt)("th",{parentName:"tr",align:null},"Description"),(0,s.kt)("th",{parentName:"tr",align:null},"Required"))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("inlineCode",{parentName:"td"},"data")),(0,s.kt)("td",{parentName:"tr",align:null},"Base64-encoded data that should be processed and signed"),(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("span",{class:"badge badge--success"},"YES"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("inlineCode",{parentName:"td"},"hashingAlgorithm")),(0,s.kt)("td",{parentName:"tr",align:null},"Specifies the digest algorithm that should be used to digest the data provided for the batch signing or used to digest the data provided for the hash signing (if the hash signing is activated)"),(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("span",{class:"badge badge--danger"},"NO"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("inlineCode",{parentName:"td"},"customIdentifier")),(0,s.kt)("td",{parentName:"tr",align:null},"Identifies the signature request. Will be included in the response to map signature with the data"),(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("span",{class:"badge badge--danger"},"NO"))))),(0,s.kt)("p",null,"The following is a sample batch signing request data:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "signatureRequests": [\n    {\n      "data": "ibi45IZCFGPX4PXK9g+5yzXOFpt25lerIfxNHWsJNgM=",\n      "hashingAlgorithm": "SHA-256",\n      "customIdentifier": "data 1"\n    },\n    {\n      "data": "N2I1Mzg1YWJiNDZmOTIwMzRlOWY5Y2U4NmMwYjIyN2E3MDk0NzNjNGU4YTQ5MDEyMzFlNGJmOTM2MjAxNGRlZjA2N2RiZGVjM2QwODVhMWM4OWRjNzZlYWIwNDFmMTY1",\n      "hashingAlgorithm": "SHA-384",\n      "customIdentifier": "data 2"\n    },\n    ...\n  ]\n}\n')),(0,s.kt)("h2",{id:"batch-signing-response-format"},"Batch signing response format"),(0,s.kt)("p",null,"Response from batch signing contains ",(0,s.kt)("inlineCode",{parentName:"p"},"JSON")," formatted data:\nThe data structure contains array of signatures with the following fields:"),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",align:null},"Field name"),(0,s.kt)("th",{parentName:"tr",align:null},"Description"),(0,s.kt)("th",{parentName:"tr",align:null},"Required"))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("inlineCode",{parentName:"td"},"signature")),(0,s.kt)("td",{parentName:"tr",align:null},"Base64-encoded signature of the data, formatted according the signature format configured"),(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("span",{class:"badge badge--success"},"YES"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("inlineCode",{parentName:"td"},"hash")),(0,s.kt)("td",{parentName:"tr",align:null},"Digest of the data requested for signature"),(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("span",{class:"badge badge--success"},"YES"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("inlineCode",{parentName:"td"},"customIdentifier")),(0,s.kt)("td",{parentName:"tr",align:null},"Maps the signature request"),(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("span",{class:"badge badge--danger"},"NO"))))),(0,s.kt)("p",null,"The following is a sample batch signing response data:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "signatures": [\n    {\n      "signature": "MIIIjwYJKoZIhvcNAQcCoIIIgDCCCHwCAQExDTALBglghkgBZQMEAgEwCwYJKoZI...",\n      "hash": "s0aux6AH+d1GWI+9ZkqqjGRO4WQfdlzV05szuY4jyxY=",\n      "customIdentifier": "signature 1"\n    },\n    {\n      "signature": "MIII8QYJKoZIhvcNAQcCoIII4jCCCN4CAQExDTALBglghkgBZQMEAgIwCwYJKoZIhvcNAQcBoIIF...",\n      "hash": "GQCAd8CWoSyHAelGDq+lZPtFLzaefBP5V8sW6qTJYu3UDP8IcFeN5h9NqIKpfkSv",\n      "customIdentifier": "signature 2",\n    },\n    ...\n  ]\n}\n')),(0,s.kt)("h2",{id:"hash-signing-support"},"Hash signing support"),(0,s.kt)("p",null,"Batch signing supports hash signing, meaning that the pre-computed digests of the data can be provided in the batch signing request. In that case the ",(0,s.kt)("inlineCode",{parentName:"p"},"data")," field for each requested hash signing contains Base64-encoded digests (see input for the ",(0,s.kt)("a",{parentName:"p",href:"./hash-signing"},"Hash Signing"),")."),(0,s.kt)("p",null,"The digest algorithm used to digest the data provided for the hash signing is taken from the properties in the following order:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("inlineCode",{parentName:"li"},"hashingAlgorithm")," in the ",(0,s.kt)("inlineCode",{parentName:"li"},"JSON")," signature request"),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("inlineCode",{parentName:"li"},"CLIENTSIDE_HASHDIGESTALGORITHM")," request metadata property")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"The ",(0,s.kt)("inlineCode",{parentName:"strong"},"hash")," of the data provided in the batch signing response equals the ",(0,s.kt)("inlineCode",{parentName:"strong"},"data")," provided in batch signing request.")),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},"See ",(0,s.kt)("a",{parentName:"p",href:"./hash-signing"},"Hash Signing")," for more information about hash signing.")))}b.isMDXComponent=!0}}]);