"use strict";(self.webpackChunkczertainly=self.webpackChunkczertainly||[]).push([[7880],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=a,f=m["".concat(s,".").concat(d)]||m[d]||u[d]||o;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6025:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return m}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],l={},s="Overview",p={unversionedId:"installation-guide/deployment/deployment-kubernetes/overview",id:"installation-guide/deployment/deployment-kubernetes/overview",title:"Overview",description:"The platform can be easily deployed using Kubernetes. The following provides a simple Kubernetes manifests for the platform that can be uased out-of-the-box to deploy in few minutes.",source:"@site/docs/03-installation-guide/03-deployment/02-deployment-kubernetes/01-overview.md",sourceDirName:"03-installation-guide/03-deployment/02-deployment-kubernetes",slug:"/installation-guide/deployment/deployment-kubernetes/overview",permalink:"/docs/installation-guide/deployment/deployment-kubernetes/overview",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Deployment Options",permalink:"/docs/installation-guide/deployment/deployment-options"},next:{title:"API Gateway",permalink:"/docs/installation-guide/deployment/deployment-kubernetes/api-gateway"}},c=[{value:"Kubernetes deployment",id:"kubernetes-deployment",children:[],level:2},{value:"Deployment of the platform services",id:"deployment-of-the-platform-services",children:[],level:2},{value:"Publishing for the user access",id:"publishing-for-the-user-access",children:[],level:2}],u={toc:c};function m(e){var t=e.components,l=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"overview"},"Overview"),(0,o.kt)("p",null,"The platform can be easily deployed using Kubernetes. The following provides a simple Kubernetes manifests for the platform that can be uased out-of-the-box to deploy in few minutes."),(0,o.kt)("p",null,"Entry point for the platform differs based on the environment setup and technology used. To create a complete solution, we will use ",(0,o.kt)("inlineCode",{parentName:"p"},"Ingress"),", but any approach can be used."),(0,o.kt)("h2",{id:"kubernetes-deployment"},"Kubernetes deployment"),(0,o.kt)("p",null,"The following diagram represents the deployment of the platform in Kubernetes. Each part of the Kubernetes deployment is described further. The deployment can be extended by specific Kubernetes implementation supported in the target environment."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Kubernetes deployment diagram",src:n(8723).Z})),(0,o.kt)("h2",{id:"deployment-of-the-platform-services"},"Deployment of the platform services"),(0,o.kt)("p",null,"The following table explains the deployment parts and provides references for further details:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Part"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Reference"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"API Gateway")),(0,o.kt)("td",{parentName:"tr",align:null},"Entry point for the platform"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"api-gateway"},"API Gateway"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Core")),(0,o.kt)("td",{parentName:"tr",align:null},"The Core of the platform"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"core"},"Core"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Administrator Web")," (optional)"),(0,o.kt)("td",{parentName:"tr",align:null},"Administrator Web UI"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"administrator-web"},"Administrator Web"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Operator Web")," (optional)"),(0,o.kt)("td",{parentName:"tr",align:null},"Operator Web UI"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"operator-web"},"Operator Web"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"Sample Connector")," (optional)"),(0,o.kt)("td",{parentName:"tr",align:null},"Sample Connector integration in the Kubernetes environment"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"sample-connector"},"Sample Connector"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"td"},"API Documentation")," (optional)"),(0,o.kt)("td",{parentName:"tr",align:null},"OpenAPI documentation for the REST APIs"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"api-documentation"},"API Documentation"))))),(0,o.kt)("h2",{id:"publishing-for-the-user-access"},"Publishing for the user access"),(0,o.kt)("p",null,"In order users can access the platform, we need to create and access point which has the following functions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"accepts trusted client certificates issued from trusted certification authorities"),(0,o.kt)("li",{parentName:"ul"},"terminates the TLS with mutual authentication"),(0,o.kt)("li",{parentName:"ul"},"forwards client certificate and request to the platform ",(0,o.kt)("strong",{parentName:"li"},"API Gateway"))),(0,o.kt)("p",null,"The simple example is ",(0,o.kt)("inlineCode",{parentName:"p"},"Ingress")," with the following configuration:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: czertainly-ingress\n  namespace: czertainly\n  annotations:\n    cert-manager.io/cluster-issuer: letsencrypt\n    kubernetes.io/ingress.class: public\n    kubernetes.io/tls-acme: "true"\n    #nginx.ingress.kubernetes.io/ssl-passthrough: "true"\n    # If you encounter a redirect loop or are getting a 307 response code \n    # then you need to force the nginx ingress to connect to the backend using HTTPS.\n    #\n    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"\n    # Enable client certificate authentication\n    nginx.ingress.kubernetes.io/auth-tls-verify-client: "on"\n    # Create the secret containing the trusted ca certificates\n    nginx.ingress.kubernetes.io/auth-tls-secret: "czertainly/czertainly-ingress-ca-secret"\n    # Specify an error page to be redirected to verification errors\n    nginx.ingress.kubernetes.io/auth-tls-error-page: "https://demo.server.com/forbidden.html"\n    # Specify the verification depth in the client certificates chain\n    nginx.ingress.kubernetes.io/auth-tls-verify-depth: "3"\n    # Specify if certificates are passed to upstream server\n    nginx.ingress.kubernetes.io/auth-tls-pass-certificate-to-upstream: "true"\nspec:\n  rules:\n  - host: demo.server.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service: \n            name: api-gateway-service\n            port:\n              number: 8080\n              #name: https\n  tls:\n  - hosts:\n    - demo.server.com\n    secretName: demo.server.com-secret # do not change\n')),(0,o.kt)("p",null,"Whe request is authenticated, the certificate will be forwarded to ",(0,o.kt)("strong",{parentName:"p"},"API Gateway")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"SSL_CLIENT_CERT")," header together with the request that the platform will handle."))}m.isMDXComponent=!0},8723:function(e,t,n){t.Z=n.p+"assets/images/kubernetes-deployment-diagram-caaff16512182357c5ed15b2ef86fb0c.png"}}]);