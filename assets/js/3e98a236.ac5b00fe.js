"use strict";(self.webpackChunkczertainly=self.webpackChunkczertainly||[]).push([[8687],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,g=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return n?a.createElement(g,i(i({ref:t},u),{},{components:n})):a.createElement(g,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},28482:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return d}});var a=n(83117),r=n(80102),o=(n(67294),n(3905)),i=["components"],l={},s="Operations",p={unversionedId:"installation-guide/deployment/deployment-appliance/operations",id:"installation-guide/deployment/deployment-appliance/operations",title:"Operations",description:"The following document describes operations for the management of virtual appliance:",source:"@site/docs/03-installation-guide/03-deployment/06-deployment-appliance/05-operations.md",sourceDirName:"03-installation-guide/03-deployment/06-deployment-appliance",slug:"/installation-guide/deployment/deployment-appliance/operations",permalink:"/docs/installation-guide/deployment/deployment-appliance/operations",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Initialization",permalink:"/docs/installation-guide/deployment/deployment-appliance/initialization"},next:{title:"Overview",permalink:"/docs/installation-guide/deployment/deployment-kubernetes/overview"}},u={},d=[{value:"Virtual appliance management",id:"virtual-appliance-management",level:2},{value:"Shut down",id:"shut-down",level:3},{value:"Restart",id:"restart",level:3},{value:"Update system",id:"update-system",level:3},{value:"User management",id:"user-management",level:2},{value:"Change user password",id:"change-user-password",level:3},{value:"Create new user",id:"create-new-user",level:3},{value:"Grant user admin privileges",id:"grant-user-admin-privileges",level:3},{value:"Delete user",id:"delete-user",level:3},{value:"Remove user admin privileges",id:"remove-user-admin-privileges",level:3},{value:"CZERTAINLY Manager",id:"czertainly-manager",level:2},{value:"Reset RKE2 node",id:"reset-rke2-node",level:3},{value:"Import TLS server certificate",id:"import-tls-server-certificate",level:3}],c={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"operations"},"Operations"),(0,o.kt)("p",null,"The following document describes operations for the management of virtual appliance:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Virtual appliance management"),(0,o.kt)("li",{parentName:"ul"},"User management"),(0,o.kt)("li",{parentName:"ul"},"CZERTAINLY Manager")),(0,o.kt)("h2",{id:"virtual-appliance-management"},"Virtual appliance management"),(0,o.kt)("h3",{id:"shut-down"},"Shut down"),(0,o.kt)("p",null,"To shut down virtual appliance, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo poweroff\n")),(0,o.kt)("h3",{id:"restart"},"Restart"),(0,o.kt)("p",null,"To restart virtual appliance, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo reboot\n")),(0,o.kt)("h3",{id:"update-system"},"Update system"),(0,o.kt)("p",null,"Updating of the virtual appliance system consists of updating and upgrading included packages:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt update\nsudo apt upgrade\n")),(0,o.kt)("h2",{id:"user-management"},"User management"),(0,o.kt)("h3",{id:"change-user-password"},"Change user password"),(0,o.kt)("p",null,"To change password of another user ",(0,o.kt)("inlineCode",{parentName:"p"},"john"),", execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo passwd john\n")),(0,o.kt)("h3",{id:"create-new-user"},"Create new user"),(0,o.kt)("p",null,"To create user with username ",(0,o.kt)("inlineCode",{parentName:"p"},"john"),", execute the following commands:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo adduser john\n")),(0,o.kt)("p",null,"Then you will be requested to fill in user details:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"czertainly@czertainly:~$ sudo adduser john\n[sudo] password for czertainly:\nAdding user `john' ...\nAdding new group `john' (1001) ...\nAdding new user `john' (1001) with group `john' ...\nCreating home directory `/home/john' ...\nCopying files from `/etc/skel' ...\nNew password:\nRetype new password:\npasswd: password updated successfully\nChanging the user information for john\nEnter the new value, or press ENTER for the default\n        Full Name []: John Doe\n        Room Number []:\n        Work Phone []:\n        Home Phone []:\n        Other []:\nIs the information correct? [Y/n]\n")),(0,o.kt)("h3",{id:"grant-user-admin-privileges"},"Grant user admin privileges"),(0,o.kt)("p",null,"To grant user admin privileges, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo adduser john sudo\n")),(0,o.kt)("h3",{id:"delete-user"},"Delete user"),(0,o.kt)("p",null,"To delete user, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo deluser john\n")),(0,o.kt)("h3",{id:"remove-user-admin-privileges"},"Remove user admin privileges"),(0,o.kt)("p",null,"To remove admin privileges for user, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo deluser john sudo\n")),(0,o.kt)("h2",{id:"czertainly-manager"},"CZERTAINLY Manager"),(0,o.kt)("h3",{id:"reset-rke2-node"},"Reset RKE2 node"),(0,o.kt)("p",null,"Whenever the IP address or hostname is changed for the virtual appliance, the RKE2 node must be reset.\nTo reset RKE2 node, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo -s czertainly-manager.sh resetnode\n")),(0,o.kt)("p",null,"When asked, choose to reset RKE2 node, enable and start RKE2 service."),(0,o.kt)("h3",{id:"import-tls-server-certificate"},"Import TLS server certificate"),(0,o.kt)("p",null,"When there is a change in the TLS configuration of the virtual appliance and new server certificate should be applied, the certificate must be imported."),(0,o.kt)("admonition",{title:"Certificate and private key",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Make sure that the certificate and corresponding private key generated during the TLS configuration of the virtual appliance match.")),(0,o.kt)("p",null,"The server certificate should be uploaded into the virtual appliance to the following location:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/home/czertainly/czertainly.crt\n")),(0,o.kt)("p",null,"To import the server certificate, execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo -s czertainly-manager.sh importcert\n")),(0,o.kt)("admonition",{title:"Certificate secret",type:"info"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"importcert")," command creates Kubernetes TLS secret with name specified in the ",(0,o.kt)("inlineCode",{parentName:"p"},"ingress.tls.secretName")," value.")))}m.isMDXComponent=!0}}]);