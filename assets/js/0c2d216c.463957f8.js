"use strict";(self.webpackChunkczertainly=self.webpackChunkczertainly||[]).push([[712],{87530:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var n=t(85893),s=t(11151);const a={},c="Certificate",r={id:"certificate-key/concept-design/core-components/certificate",title:"Certificate",description:"The Certificate holds the information about the certificate and its lifecycle. It represents the certificate in a human-readable format. Certificate holds the following information of any certificate:",source:"@site/docs/10-certificate-key/02-concept-design/04-core-components/12-certificate.md",sourceDirName:"10-certificate-key/02-concept-design/04-core-components",slug:"/certificate-key/concept-design/core-components/certificate",permalink:"/docs/certificate-key/concept-design/core-components/certificate",draft:!1,unlisted:!1,editUrl:"https://github.com/3KeyCompany/CZERTAINLY-Documentation/edit/documentation/docs/10-certificate-key/02-concept-design/04-core-components/12-certificate.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Location",permalink:"/docs/certificate-key/concept-design/core-components/location"},next:{title:"Group",permalink:"/docs/certificate-key/concept-design/core-components/group"}},d={},l=[{value:"Certificate status",id:"certificate-status",level:2},{value:"Validation",id:"validation",level:2},{value:"Validation steps",id:"validation-steps",level:3},{value:"Validation types",id:"validation-types",level:3},{value:"Validation algorithm",id:"validation-algorithm",level:3},{value:"Certificate Path Validation rules",id:"certificate-path-validation-rules",level:3},{value:"Attributes",id:"attributes",level:2},{value:"Metadata",id:"metadata",level:2}];function o(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",object:"object",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h1,{id:"certificate",children:"Certificate"}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," holds the information about the certificate and its lifecycle. It represents the certificate in a human-readable format. ",(0,n.jsx)(i.code,{children:"Certificate"})," holds the following information of any certificate:"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Human understandable parsed certificate content"}),"\n",(0,n.jsx)(i.li,{children:"Base64 certificate content"}),"\n",(0,n.jsx)(i.li,{children:"Certificate validation status"}),"\n",(0,n.jsx)(i.li,{children:"Certificate compliance status"}),"\n",(0,n.jsx)(i.li,{children:"Metadata including discovery information"}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["In addition to the above details, the following are mapped to the ",(0,n.jsx)(i.code,{children:"Certificate"})," for the ease of management,"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Certificate owner"}),"\n",(0,n.jsxs)(i.li,{children:["Binding ",(0,n.jsx)(i.code,{children:"RA Profile"})]}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.code,{children:"Entity"})}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"Group"})," it belongs to"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"certificate-status",children:"Certificate status"}),"\n",(0,n.jsxs)(i.p,{children:["Certificate status represents state of certificate lifecycle and change of its status depends on certificate operations (e.g. issue, revoke, etc.) or events (e.g. expired, invalid, etc.) in platform.\r\nWhen certificate is requested, it starts in status ",(0,n.jsx)(i.code,{children:"New"})," and needs to be issued to use it or perform client operations with it."]}),"\n",(0,n.jsx)(i.p,{children:"The following statuses are supported:"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Status"}),(0,n.jsx)(i.th,{children:"Description"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"New"})}),(0,n.jsxs)(i.td,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," is created (requested) and ready to be issued"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Rejected"})}),(0,n.jsxs)(i.td,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," issue approval request was rejected."]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Valid"})}),(0,n.jsxs)(i.td,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," is valid according to validation described ",(0,n.jsx)(i.a,{href:"#validation",children:"below"})]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Invalid "})}),(0,n.jsxs)(i.td,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," is valid according to validation described ",(0,n.jsx)(i.a,{href:"#validation",children:"below"})]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Revoked"})}),(0,n.jsxs)(i.td,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," is revoked"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Expiring"})}),(0,n.jsxs)(i.td,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," is marked as expiring when its expiry is in less than 30 days"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"Expired"})}),(0,n.jsxs)(i.td,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," is expired"]})]})]})]}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.code,{children:"Certificate"})," status transition diagram is as follows:"]}),"\n",(0,n.jsx)(i.object,{type:"image/svg+xml",data:"https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuUNAo4n9LKZDBIYfL4X9BKukoYmeoSpFu-NYvOhMYbNGrRLJy4ijv-K24c1EK6fMQd99QWf292mn9nE9wvbN1X40Y-CI2aejoyzEHH5ohIZ8BChCI-VbWgf7DXrP2AuNMH2i6oG8CmPLAOeegjfKY050t_9omNo7B08s0I70o-MGcfS233e0"}),"\n",(0,n.jsx)(i.h2,{id:"validation",children:"Validation"}),"\n",(0,n.jsx)(i.h3,{id:"validation-steps",children:"Validation steps"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Validation Step 1: Construct the Chain and Validate Signatures\r\nUp to trusted certificates in the truststore.\r\nThe whole chain must be valid, otherwise the certificate is considered to be invalid."}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Validation Step 2: Check Validity Dates, Policy and Key Usage\r\nCheck the ",(0,n.jsx)(i.code,{children:"notBefore"})," and ",(0,n.jsx)(i.code,{children:"notAfter"})," dates (in the whole chain)."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Validation Step 3: Consult Revocation Authorities\r\nIf OCSP is available, then do the OCSP check.\r\nOtherwise, fallback to CRL check.\r\nIf no revocation information source is available, show the status of certificate with the information that the revocation was not checked, was not available, or related reason."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"validation-types",children:"Validation types"}),"\n",(0,n.jsxs)(i.p,{children:["Each ",(0,n.jsx)(i.code,{children:"Certificate"})," is validated against various attributes and validation sources and its validation status is provided."]}),"\n",(0,n.jsxs)(i.p,{children:["The following validation are performed for ",(0,n.jsx)(i.code,{children:"Certificate"}),":"]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"#"}),(0,n.jsx)(i.th,{children:"Validation"}),(0,n.jsx)(i.th,{children:"Description"}),(0,n.jsx)(i.th,{children:"Status"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"1"}),(0,n.jsx)(i.td,{children:"Signature validation"}),(0,n.jsxs)(i.td,{children:["Check the signature of ",(0,n.jsx)(i.code,{children:"Certificate"})," using public key of the issuer certificate."]}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)("span",{class:"badge badge--success",children:"VALID"})," if verification success.",(0,n.jsx)("br",{}),(0,n.jsx)("span",{class:"badge badge--danger",children:"INVALID"})," if verification fails."]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"2"}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"notBefore"})," validation"]}),(0,n.jsxs)(i.td,{children:["Check for ",(0,n.jsx)(i.code,{children:"notBefore"})," attribute of the certificate."]}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)("span",{class:"badge badge--secondary",children:"INACTIVE"})," in case the ",(0,n.jsx)(i.code,{children:"notBefore"})," >= current date.",(0,n.jsx)("br",{}),(0,n.jsx)("span",{class:"badge badge--success",children:"VALID"})," if ",(0,n.jsx)(i.code,{children:"notBefore"})," < current date."]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"3"}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.code,{children:"notAfter"})," validation"]}),(0,n.jsxs)(i.td,{children:["Check for ",(0,n.jsx)(i.code,{children:"notAfter"})," attribute of the certificate."]}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)("span",{class:"badge badge--warning",children:"EXPIRED"})," in case the ",(0,n.jsx)(i.code,{children:"notAfter"})," <= current date.",(0,n.jsx)("br",{}),(0,n.jsx)("span",{class:"badge badge--success",children:"VALID"})," if ",(0,n.jsx)(i.code,{children:"notAfter"})," > current date."]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"4"}),(0,n.jsx)(i.td,{children:"OCSP check"}),(0,n.jsxs)(i.td,{children:["Check status using OCSP URL available in the certificate extension ",(0,n.jsx)(i.code,{children:"AuthorityInformationAccess"}),"."]}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)("span",{class:"badge badge--success",children:"VALID"})," if OCSP returns ",(0,n.jsx)(i.code,{children:"good"}),".",(0,n.jsx)("br",{}),(0,n.jsx)("span",{class:"badge badge--secondary",children:"UNKNOWN"})," if the OCSP response is ",(0,n.jsx)(i.code,{children:"unknown"}),".",(0,n.jsx)("br",{}),(0,n.jsx)("span",{class:"badge badge--danger",children:"REVOKED"})," if the OCSP return ",(0,n.jsx)(i.code,{children:"revoked"}),".",(0,n.jsx)("br",{}),(0,n.jsx)("span",{class:"badge badge--secondary",children:"NOOCSP"})," in case there is no OCSP responder available for revocation checking."]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"5"}),(0,n.jsx)(i.td,{children:"CRL check"}),(0,n.jsxs)(i.td,{children:["Check status using CRL USL available in the certificate attribute ",(0,n.jsx)(i.code,{children:"CRLDistributionPoints"}),"."]}),(0,n.jsxs)(i.td,{children:[(0,n.jsx)("span",{class:"badge badge--success",children:"VALID"})," in case CRL is available, valid, and the certificate is not on the list.",(0,n.jsx)("br",{}),(0,n.jsx)("span",{class:"badge badge--danger",children:"REVOKED"})," in case CRL is available, valid, and the certificate is on the list.",(0,n.jsx)("br",{}),(0,n.jsx)("span",{class:"badge badge--secondary",children:"NOCRL"})," in case there is no CRL available for revocation checking."]})]})]})]}),"\n",(0,n.jsxs)(i.p,{children:["The above is true for a single ",(0,n.jsx)(i.code,{children:"Certificate"}),", but all certificates in the certificate chain are validated the same way."]}),"\n",(0,n.jsx)(i.h3,{id:"validation-algorithm",children:"Validation algorithm"}),"\n",(0,n.jsx)(i.p,{children:"To get the overall validation result, the following algorithm is applied:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["If the ",(0,n.jsx)(i.code,{children:"Certificate"})," signature validation outputs ",(0,n.jsx)("span",{class:"badge badge--danger",children:"INVALID"})," then return ",(0,n.jsx)("span",{class:"badge badge--danger",children:"INVALID"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Else if the validity time of the Certificate is ",(0,n.jsx)("span",{class:"badge badge--secondary",children:"INACTIVE"})," or ",(0,n.jsx)("span",{class:"badge badge--warning",children:"EXPIRED"})," then return this status."]}),"\n",(0,n.jsx)(i.li,{children:"Else check OCSP and CRL status."}),"\n",(0,n.jsxs)(i.li,{children:["If ",(0,n.jsx)("span",{class:"badge badge--secondary",children:"NOOCSP"})," and ",(0,n.jsx)("span",{class:"badge badge--secondary",children:"NOCRL"})," return ",(0,n.jsx)("span",{class:"badge badge--success",children:"VALID"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"certificate-path-validation-rules",children:"Certificate Path Validation rules"}),"\n",(0,n.jsx)(i.p,{children:"All the certificates in the certificate path must be validated.\r\nException is a Root CA certificate, as it is self-signed, there is no trusted way how to validate it, it must be explicitly trusted.\r\nThe same validation rules applies for each certificate up to the Root CA certificate.\r\nThe overall result of validation is the result of validation from the bottom to top."}),"\n",(0,n.jsx)(i.admonition,{title:"Certificate chain",type:"info",children:(0,n.jsxs)(i.p,{children:["When a certificate chain is not available for a ",(0,n.jsx)(i.code,{children:"Certificate"}),", the platform tries to download the certificate chain from the Authority Information Access (AIA) extension. If found, the chain is downloaded until the root is available and the validation will be performed. if the complete certificate chain is not available, the validation is performed only using available certificates."]})}),"\n",(0,n.jsx)(i.admonition,{title:"Self-signed Certificate",type:"info",children:(0,n.jsx)(i.p,{children:"For self-signed certificates, OCSP, CRL checks will not be performed."})}),"\n",(0,n.jsx)(i.h2,{id:"attributes",children:"Attributes"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"Certificate"})," attributes hold information related to the platform. Once a certificate request is submitted platform creates the ",(0,n.jsx)(i.code,{children:"Certificate"})," with a specific identification, defines certificate type, and assigns validity status. ",(0,n.jsx)(i.code,{children:"Certificate"})," attributes also include connection to the other part of platform components."]}),"\n",(0,n.jsx)(i.h2,{id:"metadata",children:"Metadata"}),"\n",(0,n.jsxs)(i.p,{children:["Metadata provides any additional information about the ",(0,n.jsx)(i.code,{children:"Certificate"})," that can be technology specific.\r\nMetadata can be used for further processing of the ",(0,n.jsx)(i.code,{children:"Certificate"})," by different components and modules of the platform."]})]})}function h(e={}){const{wrapper:i}={...(0,s.a)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},11151:(e,i,t)=>{t.d(i,{Z:()=>r,a:()=>c});var n=t(67294);const s={},a=n.createContext(s);function c(e){const i=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(a.Provider,{value:i},e.children)}}}]);